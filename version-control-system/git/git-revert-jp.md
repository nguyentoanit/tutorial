# Git Manual Rollback
## 概要
Gitにてコマンドラインでソースコードをロールバックする手順を記載するものです。既存コミットを削除しないで、ロールバックを実行することです。

## 前提条件
Gitをインストールしてください。（[ダウンロード](https://git-scm.com/downloads)）

## Gitにてソースコードをロールバックする手順
ソースコードのロールバックを実行する前に、リポジトリからの最新ソースコードを収得して、ロールバックブランチへ切り替える。最新ソースコードを収得するように`git pull`文を、ターミナルにブランチを切り替えるように`git checkout`文を使用する。ロールバックを正常に保障するので、ロールバックブランチにて新しいブランチを作成することになる。
例：`git checkout -b rollback-1 master`
新しいブランチ：**rollback-1**、ロールバックブランチ：**master**。
**master**ブランチから**rollback-1**ブランチを作成するということです。

リポジトリからの最新コードを収得してから、過去コミットを再確認するので`git log`文を使用することになる。コミットリスト中に移動できるように「↓↑」キーボードを、抜け出すように「q」のキーボードを、利用することになる。

必要なコミットのコードをロールバックするので、git revert文で以下のように使用するのとになる。
```
git revert <commit-id>
```

例：3f16d893407abb67485e143ed1f20378e57c0894というコミットIDをロールバックする場合、以下の文を実行してください。
```
git revert 3f16d893407abb67485e143ed1f20378e57c0894
```

git revert文利用場合：２つケースが有効になっている。

### ケース１：
元に戻すこと（revert）は通常に実行するになると、新しいコミットのメッセージを入力するウィンドウズが表示されている。このコミットはPCへソースコードをロールバックするものです。

メッセージ入力済み後、エディターを抜け出すことになる。（例：私のPCに対して、「ctrl+x」を押すことです）。

保存が完了したメッセージが表示されていることです。

### ケース２：
ロールバックコードと既存コードの間にコンフリクトが発生すれば、ロールバックはエラーになっているということです。

エラーメッセージ：ソースコードはコンフリクトになっているので、元に戻すことが出来ないです。

git status文でコンフリクトになっているファイルを確認することです。

エディターでコンフリクトファイルを開いて、「<<<<<<< HEAD」と「>>>>>>>」というコンフリクトになっているコードラインを確認・修正・保存することです。

コンフリクト修正済み後、ターミナルを開いて、ステージエリアにコンフリクト修正ファイルをgit add文で追加することです。

次は、コンフリクト修正完了とロールバックコード実装継続を確認できるように、git revert --continue文を利用することです。この時点の表示されているウィンドウズに新しいコミットのメッセージを入力するになる。このコミットはソースコードロールバックのものです。（ケース１と同様になる）。

コミット完了のはソースコードロールバックがほぼ完了するという意味です。
サーバーにロールバックソースコードは有効になるために、Gitリポジトリへロールバックコードをプッシュして、ロールバックブランチ先にロールバックブランチをマージして、SSHでサーバーをアクセスして、リポジトリからの最新ソースコードをプルする必要です。

## REFERENCES
https://stackoverflow.com/questions/2733873/reverting-a-single-file-to-a-previous-version-in-git/8028854
